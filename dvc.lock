schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: data/123
      md5: 7f8d82700ccb746cfb1094158f921d5d.dir
      size: 337798049
      nfiles: 1070
    - path: data/80
      md5: 333712d37e0c5eefcfc0fc7906c94b2d.dir
      size: 203662061
      nfiles: 2596
    - path: src/prepare.py
      md5: 1cd6d98d4fc871bcc33930c7bada64d1
      size: 3935
    params:
      params.yaml:
        prepare.classes:
        - truck_cabin
        - tank_trailer
        - car_carrier
        - car_trailer
        - car_carrier_trailer
        - trailer
        - platform_trailer
        - car
        - motorcycle
        - bus
        - truck
        - pickup
        - axle
        - unknown
        - van
        - dump_truck_body
        - service_vehicle
        - drawbar
        prepare.datasets:
        - 80
        - 123
        prepare.seed: 666
        prepare.train_size: 0.75
    outs:
    - path: data/prepared
      md5: 82b5d893b13e9bb607034a1a925b8299.dir
      size: 190700
      nfiles: 3
  train:
    cmd: python src/train.py
    deps:
    - path: cfg/obj.names
      md5: d863f386f6c521fe47f546c0c5150a4b
      size: 183
    - path: cfg/yolo.cfg
      md5: 490837170de0d3fb121bec6037a65974
      size: 2791
    - path: data/prepared
      md5: 82b5d893b13e9bb607034a1a925b8299.dir
      size: 190700
      nfiles: 3
    - path: data/prepared/obj.data
      md5: d8b7f6151df7b0daf566693e1448c7c1
      size: 305
    - path: src/train.py
      md5: 58270f0a10ad1aeba58f48c6050aba02
      size: 946
    params:
      params.yaml:
        train.cfg: cfg/yolo.cfg
        train.obj_data: data/prepared/obj.data
    outs:
    - path: runs/train/backup/yolo_best.weights
      md5: 0d582ab9848df68d53025f2d602a0b5a
      size: 34862076
  make_json:
    cmd: python src/make_json.py
    deps:
    - path: cfg/obj.names
      md5: d863f386f6c521fe47f546c0c5150a4b
      size: 183
    - path: cfg/yolo.cfg
      md5: 490837170de0d3fb121bec6037a65974
      size: 2791
    - path: data/prepared/obj.data
      md5: d8b7f6151df7b0daf566693e1448c7c1
      size: 305
    - path: runs/train/backup/yolo_best.weights
      md5: 0d582ab9848df68d53025f2d602a0b5a
      size: 34862076
    - path: src/make_json.py
      md5: 1ef48f97eab6b3facc811e21ed58026d
      size: 1001
    params:
      params.yaml:
        make_json.cfg: cfg/yolo.cfg
        make_json.obj_data: data/prepared/obj.data
        make_json.obj_names: cfg/obj.names
        make_json.valid_txt: data/prepared/valid.txt
        make_json.weights: runs/train/backup/yolo_best.weights
    outs:
    - path: runs/eval/result.json
      md5: 60560740d34dd3d2c14e83c26ee95227
      size: 275299
  prepare_gt:
    cmd: python src/make_gt_det.py
    deps:
    - path: cfg/obj.names
      md5: d863f386f6c521fe47f546c0c5150a4b
      size: 183
    - path: data/prepared/valid.txt
      md5: ceb9db0d08e0f0490f1464d94dbfe05d
      size: 48131
    - path: runs/eval/result.json
      md5: 60560740d34dd3d2c14e83c26ee95227
      size: 275299
    - path: src/make_gt_det.py
      md5: eae84274f8dc76bb572fdf8d59d9ff57
      size: 922
    outs:
    - path: runs/eval/pascalvoc_det
      md5: 6eb94a6c3071720ab2c39349adf17ac2.dir
      size: 30819
      nfiles: 703
    - path: runs/eval/pascalvoc_gt
      md5: 6b1f9ebd0bea0fc3bc94909048e52c40.dir
      size: 41675
      nfiles: 703


  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: runs/eval/pascalvoc_det
      md5: 6eb94a6c3071720ab2c39349adf17ac2.dir
      size: 30819
      nfiles: 703
    - path: runs/eval/pascalvoc_gt
      md5: 6b1f9ebd0bea0fc3bc94909048e52c40.dir
      size: 41675
      nfiles: 703
    outs:
    - path: runs/eval/results
      md5: dc4e64ad136a9211cb70c3d68cff7856.dir
      size: 335710
      nfiles: 15
