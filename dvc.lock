schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: src/prepare.py
      md5: 7295635e039f2255050eb9e391951568
      size: 3902
    params:
      params.yaml:
        prepare.classes:
        - truck_cabin
        - tank_trailer
        - car_carrier
        - car_trailer
        - car_carrier_trailer
        - trailer
        - platform_trailer
        - car
        - motorcycle
        - bus
        - truck
        - pickup
        - axle
        - unknown
        - van
        - dump_truck_body
        - service_vehicle
        - drawbar
        prepare.datasets:
        - 80
        - 123
        prepare.seed: 666
        prepare.train_size: 0.75
    outs:
    - path: data/prepared
      md5: 831c1167b40a910bf28272ce80fd2d70.dir
      size: 177871
      nfiles: 2
  train:
    cmd: python src/train.py
    deps:
    - path: cfg/obj.data
      md5: 6d38f23bd29c903b02eb379fe084bc34
      size: 322
    - path: cfg/obj.names
      md5: d863f386f6c521fe47f546c0c5150a4b
      size: 183
    - path: cfg/yolo.cfg
      md5: f80ff02c15d462c5d28fffaf21195c88
      size: 2791
    - path: src/train.py
      md5: 37ffe36ef3d12f2e6eddfbaaef2d6e04
      size: 733
    params:
      params.yaml:
        train.cfg: cfg/yolo.cfg
        train.obj_data: cfg/obj.data
    outs:
    - path: runs/train/backup/yolo_best.weights
      md5: d3c8d2ad3c5b63386c0cefd0c9e489dd
      size: 34862076
  make_json:
    cmd: python src/make_json.py
    deps:
    - path: cfg/obj.data
      md5: 6d38f23bd29c903b02eb379fe084bc34
      size: 322
    - path: cfg/obj.names
      md5: d863f386f6c521fe47f546c0c5150a4b
      size: 183
    - path: cfg/yolo.cfg
      md5: f80ff02c15d462c5d28fffaf21195c88
      size: 2791
    - path: src/make_json.py
      md5: dbdf54b1e2627d3ead545b4a48b7bce0
      size: 1006
    params:
      params.yaml:
        make_json.cfg: cfg/yolo.cfg
        make_json.obj_data: cfg/obj.data
        make_json.obj_names: cfg/obj.names
        make_json.valid_txt: data/prepared/valid.txt
        make_json.weights: runs/train/backup/yolo_best.weights
    outs:
    - path: runs/eval/result.json
      md5: 883226b418bdca8f89b1cb2e88f9945e
      size: 305299
  prepare_gt:
    cmd: python src/make_gt_det.py
    deps:
    - path: cfg/obj.names
      md5: d863f386f6c521fe47f546c0c5150a4b
      size: 183
    - path: data/prepared/valid.txt
      md5: 5f15148f21c3e263908a92b1c7514898
      size: 44999
    - path: runs/eval/result.json
      md5: 883226b418bdca8f89b1cb2e88f9945e
      size: 305299
    - path: src/make_gt_det.py
      md5: eae84274f8dc76bb572fdf8d59d9ff57
      size: 922
    outs:
    - path: runs/eval/pascalvoc_det
      md5: aa110d920f383b0e6b3033a178f90e08.dir
      size: 36594
      nfiles: 703
    - path: runs/eval/pascalvoc_gt
      md5: 6b1f9ebd0bea0fc3bc94909048e52c40.dir
      size: 41675
      nfiles: 703
  evaluate:
    cmd: python src/evaluate.py
    deps:
    - path: runs/eval/pascalvoc_det
      md5: aa110d920f383b0e6b3033a178f90e08.dir
      size: 36594
      nfiles: 703
    - path: runs/eval/pascalvoc_gt
      md5: 6b1f9ebd0bea0fc3bc94909048e52c40.dir
      size: 41675
      nfiles: 703
    outs:
    - path: runs/eval/results
      md5: 0fd80967fea5c43d11a0ceba0dfa5878.dir
      size: 360963
      nfiles: 15
